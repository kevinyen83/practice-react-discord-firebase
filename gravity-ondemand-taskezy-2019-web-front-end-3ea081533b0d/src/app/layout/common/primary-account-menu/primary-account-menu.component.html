<div>
  <span class="relative flex items-center">
    <img
      class="w-7 h-7 rounded-full"
      *ngIf="currentAccount?.detail?.logo && showAvatar"
      [src]="currentAccount?.detail?.logo" />
    <mat-icon
      class="w-12 h-12"
      *ngIf="showAvatar && !currentAccount?.detail?.logo"
      [svgIcon]="'heroicons_outline:user-circle'"></mat-icon>
    <div
      *ngIf="currentAccount && currentAccount.detail"
      class="flex flex-col ml-3">
      <span
        data-cy="account-name"
        class="text-xl text-left"
        >{{
          currentAccount?.detail?.name
            ? currentAccount?.detail?.name
            : "NO ACCOUNT"
        }}</span
      >
      <button
        mat-menu-item
        class="flex flex-row items-center"
        data-cy="account-swap-button"
        [matMenuTriggerFor]="userActions"
        (menuOpened)="isOpened($event)">
        <span class="text-primary-600 text-left">swap account</span>
        <mat-icon
          class="text-primary-600"
          *ngIf="!menuOpened"
          >expand_more</mat-icon
        >
        <mat-icon
          class="text-primary-600"
          *ngIf="menuOpened"
          >expand_less</mat-icon
        >
      </button>
    </div>
  </span>
</div>

<mat-menu
  [xPosition]="'after'"
  [yPosition]="'below'"
  #userActions="matMenu"
  (closed)="isClosed($event)"
  class="max-h-[600px]">
  <div *ngFor="let account of accountList">
    <button
      [ngClass]="{ 'bg-gray-300': account.uuid === currentAccount.uuid }"
      mat-menu-item
      (click)="handleSwitchAccount(account)">
      <span class="flex flex-col leading-none">
        <span class="mt-1.5 text-md font-medium">{{
          account?.detail?.name
        }}</span>
      </span>
    </button>
  </div>
  <mat-divider
    *ngIf="accountList[0]"
    class="my-2"></mat-divider>
  <button
    data-cy="create-primary-button"
    mat-menu-item
    (click)="handleNewPrimaryAccount()">
    <span>Create New Account</span>
  </button>
</mat-menu>
