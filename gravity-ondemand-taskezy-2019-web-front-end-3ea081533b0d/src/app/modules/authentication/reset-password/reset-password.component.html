<app-auth-layout
  class="w-full"
  [name]="'Reset Password'"
  [status]="'reset-password'"
  [headerName]="'reset-password-header'"
>
  <fuse-alert
    class="mt-4 mb-1"
    *ngIf="showAlert"
    [appearance]="'outline'"
    [showIcon]="false"
    [type]="alert.type"
    [dismissible]="true"
    [@shake]="alert.type === 'error'"
  >
    {{ alert.message }}
  </fuse-alert>
  <form
    *ngIf="!resetComplete"
    class="w-full pl-8 pr-8 flex-col m-auto"
    name="resetPasswordForm"
    [formGroup]="resetPasswordForm"
    #resetPasswordNgForm="ngForm"
  >
    <!--      <mat-form-field class="w-full" *ngIf="!token">-->
    <!--        <mat-label>Token</mat-label>-->
    <!--        <input matInput type="token" formControlName="token" />-->
    <!--        <mat-icon matSuffix class="secondary-text">vpn_key</mat-icon>-->
    <!--        <mat-error> Token is required </mat-error>-->
    <!--      </mat-form-field>-->

    <mat-form-field class="w-full">
      <mat-label>New Password</mat-label>
      <input
        matInput
        type="password"
        formControlName="password"
        #resetPasswordField
        autocomplete="new-password"
      />
      <!-- <mat-icon matSuffix class="secondary-text">vpn_key</mat-icon> -->

      <button
        mat-icon-button
        type="button"
        (click)="
          resetPasswordField.type === 'password'
            ? (resetPasswordField.type = 'text')
            : (resetPasswordField.type = 'password')
        "
        matSuffix
      >
        <mat-icon
          class="icon-size-5"
          *ngIf="resetPasswordField.type === 'password'"
          >visibility</mat-icon
        >
        <mat-icon class="icon-size-5" *ngIf="resetPasswordField.type === 'text'"
          >visibility_off</mat-icon
        >
      </button>

      <mat-error *ngIf="resetPasswordForm.get('password').hasError('required')">
        Password is required
      </mat-error>
      <mat-error
        *ngIf="resetPasswordForm.get('password').hasError('minlength')"
      >
        Password must be 8 characters
      </mat-error>
    </mat-form-field>

    <button
      color="primary"
      class="text-xl font-bold w-full m-auto rounded-full mt-8"
      mat-raised-button
      [disabled]="resetPasswordForm.disabled"
      (click)="resetPassword()"
    >
      <span *ngIf="!resetPasswordForm.disabled"> Reset password </span>
      <mat-progress-spinner
        *ngIf="resetPasswordForm.disabled"
        [diameter]="24"
        [mode]="'indeterminate'"
      ></mat-progress-spinner>
    </button>
  </form>
  <div class="flex flex-col mt-2 text-base font-medium">
    <div class="self-center">
      Return to
      <a class="text-primary hover:underline" [routerLink]="['/auth/login']"
        >Sign In</a
      >
    </div>
  </div>
</app-auth-layout>
