<div class="flex flex-col flex-auto min-w-0">
  <!--Header-->
  <div
    class="header text-white p-10 p-sm-24 bg-primary flex flex-row justify-between items-center sm:items-start top-0"
  >
    <!-- APP TITLE -->
    <div class="text-3xl flex items-center">
      <div class="mr-16">
        <img src="./assets/images/icons/resource.svg" alt="icon" />
      </div>
      <span data-cy="logo-text" class="logo-text h1"> Resources </span>
    </div>
    <div class="flex w-2/3 justify-between items-center">
      <app-search-header-for-users
        class="w-3/4 mr-2"
        [currentUser]="'resource'"
        [users]="allResources"
        (updateList)="updateListResources($event)"
      ></app-search-header-for-users>
      <button
        mat-stroked-button
        (click)="addInvite()"
        data-cy="invite-resource"
      >
        <mat-icon class="text-white">add</mat-icon>Invite Resource
      </button>
    </div>
  </div>
  <!--/Header-->
  <!--Content-->

  <div class="content p-14 h-24 flex-auto overflow-auto">
    <div>
      <app-invite-members-form-array
        [currentAccount]="currentAccount"
        [type]="'resource'"
      ></app-invite-members-form-array>
      <!--Member Table-->
      <table
        mat-table
        matSort
        (matSortChange)="announceSortChange($event)"
        class="table-members w-full h-max"
        #sorting="matSort"
        [dataSource]="dataSource"
      >
        <ng-container matColumnDef="pic">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          ></th>
          <td mat-cell *matCellDef="let row">
            <div class="w-[50px] h-[50px] rounded-full flex bg-white">
              <img [src]="row.avatar || defaultAvatar" alt="logo" />
            </div>
          </td>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          >
            Resource Name
          </th>
          <td mat-cell *matCellDef="let row">
            <div>
              <div>{{ row?.name }}</div>
              <!--                <div><mat-hint>{{ row?.attitude?.name }}</mat-hint></div>-->
            </div>
          </td>
        </ng-container>

        <!-- Supplier Column -->
        <ng-container matColumnDef="supplier">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          >
            Supplier
          </th>
          <td mat-cell *matCellDef="let row">
            {{ row?.supplier?.name }}
          </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          >
            Email
          </th>
          <td mat-cell *matCellDef="let row">
            {{ row.email }}
          </td>
        </ng-container>

        <!-- Phone Column -->
        <ng-container matColumnDef="phone">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          >
            Contact number
          </th>
          <td mat-cell *matCellDef="let row">
            {{ row.phone }}
          </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          >
            Status
          </th>
          <td mat-cell *matCellDef="let row">
            <div class="flex items-center">
              <div
                class="w-3 h-3 rounded-full mr-2"
                [ngClass]="
                  utils.getStatusColour(
                    row?.status,
                    row.date_invited != undefined,
                    true
                  )
                "
              ></div>
              <div>
                {{
                  utils.getStatus(
                    row?.status,
                    row.date_invited != undefined,
                    true
                  )
                }}
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Controls Column -->
        <ng-container matColumnDef="controls">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by number"
          ></th>
          <td mat-cell *matCellDef="let row">
            <div
              *ngIf="row.date_invited != undefined && row.status == 0"
              class="flex flex-row"
            >
              <button mat-icon-button (click)="resendInvite(row)">
                <mat-icon class="text-gray-300">autorenew</mat-icon>
              </button>
              <button mat-icon-button (click)="cancelInvite(row)">
                <mat-icon class="text-gray-300">delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          class="cursor-pointer hover:bg-gray-100"
          (click)="editResource(row)"
          mat-row
          *matRowDef="let row; columns: displayedColumns; let index = index"
        ></tr>
      </table>
    </div>
  </div>
  <!--Content-->
</div>
