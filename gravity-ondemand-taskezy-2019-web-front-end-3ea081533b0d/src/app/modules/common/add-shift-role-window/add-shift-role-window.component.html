<div class="add-shift-role">
  <div
    data-cy="header-role"
    class="header-role bg-primary font-semibold capitalize text-white text-3xl p-6"
  >
    {{ status }} Shift Role
  </div>

  <div class="content-add-shift-role">
    <form class="flex w-full" [formGroup]="addShiftRoleForm">
      <mat-stepper
      class="w-full"
        #stepper
        [linear]="true"
        (selectionChange)="selectionChange($event)"
      >
        <mat-step>
          <ng-template matStepLabel>Select Role from the list</ng-template>
          <div class="content-add-role p-8">
            <div class="2xl:flex 2xl:justify-between xl:flex xl:justify-between lg:flex lg:justify-between md:flex md:flex-col md:justify-center sm:flex sm:flex-col sm:justify-center ">
            <div class="2xl:w-1/2 xl:w-1/2 lg:w-1/2 md:w-full sm:w-full flex flex-col">
              <mat-form-field class="resource-rate w-full" data-cy="resource-rate-name" required>
                <mat-label>Name of Resource Rate</mat-label>
                <mat-select
                  class="select"
                  formControlName="nameResourceRole"
                  (selectionChange)="changeFieldResourceRole($event)"
                  required
                >
                  <mat-option
                    #option
                    *ngFor="let role of shiftRates"
                    [value]="role"
                    >{{ role.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>

              <mat-form-field class="role w-full" data-cy="resource-rate-shift-role" >
                <mat-label>Name of Shift Role</mat-label>
                <input
                  matInput
                  name="nameShiftRole"
                  formControlName="nameShiftRole"
                />
              </mat-form-field>
              <!--      <mat-form-field class="role w-1/2">-->
              <!--        <mat-label>Item Code</mat-label>-->
              <!--        <input matInput-->
              <!--               name="item_code"-->
              <!--               formControlName="item_code">-->
              <!--      </mat-form-field>-->
              <mat-form-field class="role fuse-mat-textarea w-full">
                <mat-label>Description</mat-label>
                <textarea
                  matInput
                  cdkTextareaAutosize
                  name="description"
                  formControlName="description"
                  required
                  #autosize="cdkTextareaAutosize"
                  cdkAutosizeMinRows="1"
                  cdkAutosizeMaxRows="5"
                  data-cy="resource-rate-description"
                ></textarea>
              </mat-form-field>
            </div>

            <div class="2xl:w-1/3 xl:w-1/3 lg:w-1/3 md:w-1/3 sm:w-1/3 2xl:ml-8 xl:ml-8 lg:ml-8">
              <div class="font-medium text-xl mb-4">Rate Types</div>

              <div *ngFor="let type of currentRate?.rates">
                <div class="flex flex-col mb-4">
                  <div class="flex justify-start">
                    <div class="flex flex-col">
                      <div class="text-gray-400">{{ type.name }}</div>
                      <div>{{ type.value | number: '1.2-2' }}</div>
                    </div>
                    <div class="flex flex-col ml-20">
                      <div class="text-gray-400 whitespace-nowrap">Item Code</div>
                      <div>{{ type.item_code }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
            <div class="buttons flex mt-8">
              <button mat-stroked-button color="primary" (click)="cancel()" data-cy="cancel-button" >
                <span>Cancel</span>
              </button>

              <button
                matStepperNext
                mat-flat-button
                color="primary"
                class="ml-4"
                (click)="next()"
                [disabled]="addShiftRoleForm.invalid"
                data-cy="next-button"
              >
                <span>Next</span>
              </button>
            </div>
          </div>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Select accreditations</ng-template>
          <p data-cy="licences-text" class="mt-2 mb-4 text-xl font-medium p-text">
            Select accreditations that will be attached to the Role
          </p>

          <div
            class="mt-5"
            *ngIf="currentVenue && currentVenue?.accreditation_requirements"
          >
            <mat-expansion-panel
              class="mb-2"
              *ngFor="
                let accreditation of currentVenue?.accreditation_requirements;
                let i = index
              "
            >
              <mat-expansion-panel-header data-cy="accreditation-checkbox-header">
                <mat-checkbox
                  [color]="'primary'"
                  [checked]="accreditation?.selected"
                  class="inline-block"
                  (click)="$event.stopPropagation()"
                  (change)="selectAccreditation($event, i)"
                  data-cy="accreditation-checkbox"
                >
                  <mat-panel-title  data-cy="accreditation-checkbox-title">
                    {{ accreditation.name }}
                  </mat-panel-title>
                </mat-checkbox>
              </mat-expansion-panel-header>

              <app-table-licence
                [accreditation]="accreditation"
              ></app-table-licence>
            </mat-expansion-panel>
          </div>

          <div class="buttons flex mt-8">
            <button mat-stroked-button (click)="back()" color="primary" data-cy="back-button">
              <span>Back</span>
            </button>

            <button
              mat-flat-button
              color="primary"
              class="ml-4 save-button"
              (click)="save()"
              data-cy="save-button"
            >
              <span>Save</span>
            </button>
          </div>
        </mat-step>
      </mat-stepper>
    </form>

    <fuse-alert
      class="mb-1 absolute z-50 top-1/2 left-1/2"
      *ngIf="showAlert"
      [appearance]="'outline'"
      [showIcon]="true"
      [type]="alert.type"
      [dismissible]="false"
      [@shake]="alert.type === 'error'"
    >
      {{ alert.message }}
    </fuse-alert>
  </div>
</div>
